<script>
  export let loading = false,
    success = false,
    error = false
</script>

<div
  class="status
    {success ? 'success' : ''}
    {loading ? 'loading' : ''}
    {error ? 'error' : ''}
    ">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="100"
    height="101"
    fill="none"
    viewBox="0 0 100 101">
    <!-- <path
      fill="currentcolor"
      d="M85.56 33.512c-2.331.064-4.878.2-7.55.455a32.14 32.14 0 0 0-42.17-10.025c-3.892-.12-8.963.319-13.99 2.475-.654.307-1.157.818-1.094 1.59a1.518 1.518 0 0 0 1.095 1.305c1.046.28 2.068.706 2.882 1.357.607.48 1.134.918 1.597 1.318a31.994 31.994 0 0 0-5.757 11.155c-2.815.79-6.536 2.08-11.076 4.216a2.284 2.284 0 0 0-1.281 2.132 2.276 2.276 0 0 0 1.477 2c2.767.99 6.336 2.368 9.822 4.001a32.121 32.121 0 1 0 62.081-14.573 68.51 68.51 0 0 1 5.099-2.779c2.347-1.158 1.489-4.699-1.138-4.627h.004ZM51.453 21.917a30.065 30.065 0 0 1 24.275 12.298 52.86 52.86 0 0 0-1.545.191s-1.238-.95-3.65-.938c0 0-4.855-7.187-13.427-9.043-8.572-1.849-14.265.41-14.265.41a26.262 26.262 0 0 0-3.067-.57 29.897 29.897 0 0 1 11.679-2.348ZM27.867 33.312c.807.711 1.458 1.298 2.216 1.88 0 0-1.437 1.718-3.226 6.724 0 0-1.373.044-3.996.64a29.991 29.991 0 0 1 5.006-9.244Zm44.306 40.541a30.104 30.104 0 0 1-50.486-17.312 47.979 47.979 0 0 1 5.174 2.995s2.879 9.97 9.155 14.792c6.277 4.823 14.094 7.706 21.6 5.75 7.51-1.957 11.216-5.558 12.346-7.614 1.133-2.056 2.982-7.199-2.468-15.016-5.174-7.419-19.887-8.305-35.091-5.854-.228.036-.32-.327-.096-.399a51.339 51.339 0 0 1 12.194-2.288c8.077-.463 12.656.464 18.006 2.52 5.346 2.056 8.225 6.02 9.667 8.847 1.437 2.831 1.956 7.047 0 13.575v.004Zm2.775-3.022a30.91 30.91 0 0 0 0-5.442s4.684-8.872 1.442-21.01c0 0 1.27-.99 3.453-2.383a30.144 30.144 0 0 1-4.895 28.835Zm10.685-34.588-.24.116c-4.005 1.852-5.186 2.926-8.54 5.505-3.342 2.572-5.09 6.173-5.554 9.822-.204 1.597-.32 3.262-.4 4.632-.023.311-.506.32-.55.02a67.424 67.424 0 0 1-.336-3.059c-.207-2.515.875-8.28 4.217-11.466a24.873 24.873 0 0 1 4.204-3.147 33.585 33.585 0 0 1 3.198-1.716c.088-.036.04-.2-.056-.18l-3.82.587-3.466.539s-2.743-2.16-6.209-.583c-3.466 1.573-2.847 6.444-2.847 6.444a.263.263 0 0 1-.499.16c-1.277-2.747-3.893-7.634-7.49-10.545-5.21-4.22-9.259-5.382-16.354-6.24-4.176-.48-8.412-.308-12.572.22-.995.127-1.474 1.357-.87 2.123l.51.64c1.302 1.58 2.476 2.674 5.422 5.11 4.176 3.473 9.387 5.318 9.387 5.318 5.418.104 13.615 1.13 13.615 1.13-3.498-4.009-5.965-5.69-10.321-7.886-2.995-1.509-7.163-2.355-9.47-2.735-.136-.04-.12-.283.023-.307 5.945-.172 8.425.28 15.252 4.172 7.454 4.256 10.86 11.247 10.86 11.247-6.787-2.124-9.395-2.26-18.654-3.154-8.424-.81-17.775 1.59-22.103 2.883-.854.255-1.465.451-2.184.69-1.717.591-3.42 1.22-5.11 1.885-.735.288-.679 1.394.04 1.637 2.275.779 4.487 1.749 6.64 2.827a87.181 87.181 0 0 1 7.35 4.16c6.9 4.312 15.54 10.333 21.093 11.775 5.554 1.437 11.986.515 14.968-2.057 1.505-1.301 2.292-2.467 2.7-3.302.115-.251.514-.127.478.136-.343 3.266-3.521 6.364-7.91 7.123-5.042.878-9.721 1.545-16.002-1.39-6.28-2.93-11.877-7.55-16.864-11.107a73.818 73.818 0 0 0-5.718-3.725c-2.076-1.206-3.968-2.136-6.268-3.27-1.909-.942-3.194-1.278-4.02-1.37-.32-.027-.444-.486-.16-.662 1.477-.927 4.403-2.524 9.063-4.125 6.005-2.076 12.345-3.657 18.67-4.336 0 0-6.377-4.48-8.385-6.587a47.95 47.95 0 0 1-1.677-1.869 115.23 115.23 0 0 1-1.318-1.557 151.23 151.23 0 0 1-1.92-2.356l-.747-.18c-.36-.08-.383-.642-.012-.742a62.085 62.085 0 0 1 8.017-1.561c1.717-.216 3.486-.335 5.163-.224 6.169.36 12.7.77 18.514 4.48 5.813 3.713 7.69 9.131 7.69 9.131a6.878 6.878 0 0 1 4.803-4.14c3.72-.879 6.935 1.126 6.935 1.126 1.167-.105 2.336-.199 3.505-.28 2.055-.145 4.112-.273 6.169-.383.32-.004.431.451.16.603Zm-15.671 1.864a.942.942 0 0 1 .954-.395c.36.072.655.367.727.73a.947.947 0 0 1-.396.951.95.95 0 0 1-1.17-.116.95.95 0 0 1-.115-1.17Z"
      class="shape" /> -->
    <g class="success">
      <path
        stroke="#33C27F"
        stroke-width="5"
        d="m20.019 50.54 18.752 21.429L80.018 29.11"
        class="success" />
    </g>
    <g class="error">
      <path stroke="#D62828" stroke-width="5" d="m28.658 71.713 42.945-42.945" />
      <path stroke="#D62828" stroke-width="5" d="M28.435 28.767 71.38 71.712" />
    </g>
    <path
      stroke="currentcolor"
      stroke-width="5"
      d="M50.019 97.839c26.118 0 47.291-21.173 47.291-47.292 0-26.118-21.173-47.291-47.291-47.291S2.728 24.429 2.728 50.547c0 26.119 21.173 47.292 47.291 47.292Z"
      class="circle loading-animation" />
    <path
      stroke="currentcolor"
      stroke-width="5"
      d="M50.019 97.839c26.118 0 47.291-21.173 47.291-47.292 0-26.118-21.173-47.291-47.291-47.291S2.728 24.429 2.728 50.547c0 26.119 21.173 47.292 47.291 47.292Z"
      class="circle indicator" />
  </svg>
</div>

<style lang="less">
  .status {
    width: (125/20em);
    line-height: 0;
    display: inline-block;
    vertical-align: top;
    margin-bottom: 1em;
    path {
      transition: stroke-dashoffset 0.33s ease;
    }

    .shape {
      transform-box: fill-box;
      transform-origin: 50% 50%;
      transition:
        transform 0.33s ease,
        opacity 0.33s ease;
      transform: scale(0.5);
      opacity: 0;
    }

    g.success {
      path {
        stroke-dashoffset: 88;
        stroke-dasharray: 88;
        transition-delay: 0.33s;
      }
    }

    g.error {
      path {
        stroke-dashoffset: 61;
        stroke-dasharray: 61;
        transition-delay: 0.33s;
      }
    }

    path.circle {
      stroke-dashoffset: 298;
      stroke-dasharray: 298;
    }

    &.loading {
      .shape {
        transform: scale(1);
        opacity: 1;
      }

      path.circle.loading-animation {
        animation: dash 3s linear infinite;
      }
    }

    // success/error states
    &.success {
      svg path.circle.indicator {
        stroke-dashoffset: 596;
        color: #33c27f;
      }

      g.success {
        path {
          stroke-dashoffset: 0;
        }
      }
    }

    &.error {
      svg path.circle.indicator {
        stroke-dashoffset: 596;
        color: #d62828;
      }

      g.error {
        path {
          stroke-dashoffset: 0;
        }
      }
    }

    @keyframes dash {
      to {
        stroke-dashoffset: 1490;
      }
    }
  }
</style>
