<script lang="ts">
  import "$styles/nav.less"
  import { pages } from "$lib/config"
  import { page } from "$app/stores"
  import { onMount } from "svelte"

  let isActive = false

  function toggleNav() {
    isActive = !isActive
  }

  // add class to header when user scrolls 100px
  let y: any
</script>

<svelte:window bind:scrollY={y} />

<nav class:active={isActive} class={y >= 100 ? "scroll" : ""}>
  <div class="container">
    <!-- Logo -->
    <a href="/" class="logo">
      <svg
        width="148"
        height="178"
        viewBox="0 0 148 178"
        fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <title>Svelte Logo</title>
        <path
          d="M138.234 23.4733C121.76 -0.104537 89.2235 -7.09314 65.6996 7.89466L24.3936 34.2271C18.8106 37.7373 14.0216 42.3741 10.3329 47.8409C6.64416 53.3077 4.13695 59.4841 2.97158 65.9752C1.00129 76.9074 2.73374 88.1844 7.89465 98.0211C4.35771 103.386 1.94525 109.412 0.803081 115.735C-0.373506 122.356 -0.216258 129.146 1.2656 135.705C2.74746 142.265 5.52411 148.462 9.43271 153.935C25.9063 177.516 58.4448 184.506 81.9657 169.513L123.281 143.181C128.863 139.67 133.65 135.033 137.337 129.566C141.024 124.099 143.53 117.923 144.694 111.433C146.667 100.502 144.939 89.2242 139.783 79.3853C143.318 74.0206 145.729 67.9953 146.87 61.673C148.048 55.052 147.892 48.2624 146.41 41.7027C144.928 35.1429 142.151 28.9452 138.242 23.4733"
          fill="#FF3E00" />
        <path
          d="M61.6635 156.154C55.1618 157.844 48.298 157.498 41.999 155.163C35.7001 152.828 30.2693 148.617 26.4401 143.097C24.09 139.807 22.4204 136.08 21.5294 132.136C20.6383 128.192 20.5436 124.11 21.2509 120.129C21.4903 118.822 21.8201 117.533 22.2378 116.272L23.0155 113.896L25.1333 115.45C30.0198 119.043 35.4839 121.775 41.2901 123.528L42.825 123.994L42.684 125.527C42.4976 127.706 43.0885 129.88 44.352 131.665C45.505 133.329 47.1411 134.599 49.0391 135.303C50.9372 136.007 53.0056 136.111 54.9648 135.601C55.8611 135.363 56.7158 134.989 57.4992 134.493L98.8131 108.157C99.8242 107.521 100.692 106.681 101.36 105.69C102.028 104.7 102.483 103.581 102.695 102.406C102.907 101.205 102.878 99.9751 102.609 98.7863C102.341 97.5976 101.838 96.4743 101.13 95.4819C99.9773 93.8181 98.3413 92.5482 96.4434 91.8437C94.5455 91.1392 92.4772 91.0341 90.5177 91.5425C89.6214 91.781 88.7667 92.1549 87.9833 92.6513L72.2177 102.702C69.6232 104.35 66.7922 105.593 63.8225 106.386C57.3208 108.076 50.4569 107.731 44.1579 105.396C37.8589 103.061 32.4282 98.8491 28.5991 93.3293C26.2483 90.0393 24.5782 86.313 23.6869 82.3689C22.7955 78.4248 22.7008 74.3424 23.4083 70.3613C24.1104 66.4581 25.6194 62.7444 27.8388 59.4577C30.0582 56.171 32.9392 53.3837 36.2974 51.2741L77.616 24.9432C80.2099 23.2926 83.041 22.0485 86.0112 21.2541C92.5129 19.5641 99.3767 19.9099 105.676 22.2448C111.975 24.5798 117.405 28.7914 121.235 34.311C123.585 37.6012 125.255 41.3276 126.146 45.2716C127.038 49.2156 127.132 53.2978 126.425 57.279C126.184 58.5857 125.854 59.8743 125.437 61.1361L124.659 63.5121L122.543 61.9613C117.657 58.368 112.193 55.6359 106.386 53.8829L104.85 53.4172L104.992 51.8839C105.178 49.7039 104.588 47.5283 103.326 45.7412C102.173 44.0774 100.537 42.8077 98.6386 42.1038C96.7406 41.3998 94.6723 41.2955 92.7131 41.8049C91.8167 42.0433 90.9621 42.4172 90.1787 42.9137L48.8537 69.2509C47.8428 69.8868 46.9757 70.7267 46.3077 71.7167C45.6398 72.7068 45.1857 73.8253 44.9745 75.0008C44.7616 76.201 44.79 77.4316 45.0582 78.6207C45.3263 79.8098 45.8289 80.9334 46.5363 81.9261C47.6897 83.5897 49.3257 84.8595 51.2235 85.5639C53.1213 86.2684 55.1896 86.3736 57.1491 85.8655C58.0453 85.6265 58.8998 85.2527 59.6835 84.7567L75.4475 74.7109C78.0409 73.0597 80.8722 71.816 83.8427 71.0234C90.3442 69.3332 97.2078 69.679 103.507 72.014C109.805 74.3489 115.236 78.5607 119.065 84.0803C121.415 87.3703 123.085 91.0966 123.977 95.0407C124.868 98.9848 124.963 103.067 124.255 107.048C123.555 110.951 122.047 114.666 119.83 117.953C117.613 121.241 114.734 124.03 111.377 126.142L70.0587 152.465C67.465 154.116 64.6338 155.36 61.6635 156.154Z"
          fill="white" />
      </svg>
    </a>

    <!-- Nav links -->
    <ul class="nav-links" class:active={isActive}>
      {#each pages as { name, path }}
        <li class="nav-link">
          <a class:active={$page.url.pathname === path} href={path} on:click={toggleNav}>{name}</a>
        </li>
      {/each}
      <li class="">
        <a href="/contact" class="btn" on:click={toggleNav}>Learn More</a>
      </li>
    </ul>

    <!-- Toggle -->
    <button class="toggle" aria-label="Toggle" class:active={isActive} on:click={toggleNav}>
      <span />
      <span />
      <span />
    </button>
  </div>
</nav>
